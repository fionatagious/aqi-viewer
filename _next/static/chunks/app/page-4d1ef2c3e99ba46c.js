(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2924:function(e,t,a){Promise.resolve().then(a.bind(a,3386))},3386:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var l=a(7437),r=a(2265);let s=[{buttonLabel:"My current location",slug:"here"},{buttonLabel:"New York City",slug:"new-york-city"},{buttonLabel:"Shanghai",slug:"shanghai"},{buttonLabel:"Hong Kong",slug:"hong-kong"},{buttonLabel:"Sacramento",slug:"sacramento"},{buttonLabel:"Bangkok",slug:"bangkok"},{buttonLabel:"Berlin",slug:"berlin"},{buttonLabel:"Barcelona",slug:"barcelona"}],n={good:"bg-green-500",moderate:"bg-yellow-500",unhealthyForSensitiveGroups:"bg-orange-500",unhealthy:"bg-red-700",veryUnhealthy:"bg-indigo-700",hazardous:"bg-rose-950"},o={good:"Good",moderate:"Moderate",unhealthyForSensitiveGroups:"Unhealthy for sensitive groups",unhealthy:"Unhealthy",veryUnhealthy:"Very unhealthy",hazardous:"Hazardous"};function i(e){return e<=50?"good":e<=100?"moderate":e<=150?"unhealthyForSensitiveGroups":e<=200?"unhealthy":e<=300?"veryUnhealthy":e>300?"hazardous":void 0}function c(){let{cityData:e,aqiColor:t,aqiCategory:a,error:c,isLoading:d,handleClick:u,refetch:h}=function(){let[e,t]=(0,r.useState)(null),[a,l]=(0,r.useState)("here"),[s,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[h,b]=(0,r.useState)(null),[m,g]=(0,r.useState)(!1),x=async()=>{g(!0);try{let e=await fetch("".concat("https://api.waqi.info/feed/").concat(a,"/?token=").concat("0a7e7ad6cbe1337e8ce7f6ab1a6deaa0c6179771")),l=await e.json();t(l.data);let r=i(l.data.aqi);c(n[r]),u(o[r]),g(!1);let s=localStorage.setItem(a,JSON.stringify(l.data));[].push(s)}catch(e){b(e)}finally{g(!1)}};return(0,r.useEffect)(()=>{if(null!=localStorage.getItem(a)&&"{}"!=localStorage.getItem(a)){let e=JSON.parse(localStorage.getItem(a));t(e);let l=i(e.aqi);c(n[l]),u(o[l])}else x()},[a]),{cityData:e,aqiColor:s,aqiCategory:d,error:h,isLoading:m,handleClick:e=>{l(e)},refetch:()=>{x()}}}();if(d)return(0,l.jsx)("div",{children:"Loading..."});if(c)return(0,l.jsxs)("div",{children:["Error: ",c.message]});if(!e)return null;{let r,n,o,i,c,d,b,m,g=new Date(e.time.s),x=(r=function(e){return(e<10?"0":"")+e},n=g.getFullYear(),o=g.getMonth()+1,i=g.getDate(),c=g.getHours()+":",d=r(g.getMinutes()),m=r(Math.floor(Math.abs(b=-g.getTimezoneOffset())/60))+":"+r(Math.abs(b)%60),i<10&&(i="0"+i),o<10&&(o="0"+o),n+"-"+o+"-"+i+" at "+c+d+" GMT"+(b>=0?"+":"-")+m);return(0,l.jsxs)("div",{className:"px-0 sm:px-64 pb-40 pt-16 bg-orange-50",children:[(0,l.jsx)("div",{className:"text-center text-3xl pb-4",children:"Air Quality Index (AQI) Viewer"}),(0,l.jsxs)("div",{className:"bg-white mt-4 p-4 rounded-xl",children:[(0,l.jsx)("div",{className:"mb-2",children:"To view AQI data for a particular city, click its corresponding button below."}),(0,l.jsx)("div",{className:"flex gap-x-2",children:s.map(e=>(0,l.jsx)("button",{className:"bg-emerald-700 hover:bg-emerald-900 focus:bg-emerald-900 text-white font-bold py-2 px-4 rounded","data-testid":e.slug,onClick:()=>u(e.slug),children:e.buttonLabel},e.slug))})]}),(0,l.jsxs)("div",{"data-testid":"results",className:"text-center text-2xl mt-6",children:[e.city.name,(0,l.jsx)("br",{}),"as of ",x,(0,l.jsx)("br",{})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("div",{className:"".concat(t," aqi-scale-by-color grid align-middle content-center mx-auto mt-4 px text-center text-3xl"),children:[(0,l.jsx)("div",{className:"w-full",children:e.aqi}),(0,l.jsx)("div",{className:"w-full",children:a})]}),(0,l.jsxs)("div",{className:"bg-white mt-4 p-4 rounded-xl",children:[(0,l.jsx)("div",{className:"font-bold",children:"Date and Time of measurement:"})," ",x,(0,l.jsxs)("div",{className:"mt-2",children:["To view the most recent AQI measurement at this station location in\xa0",e.city.name,", click the button below."]}),(0,l.jsxs)("button",{onClick:h,"data-testid":"refresh-button",className:"mt-4 bg-emerald-700 hover:bg-emerald-900 focus:bg-emerald-900 text-white font-bold py-2 px-4 rounded",children:["Get the latest data for ",e.city.name]})]}),(0,l.jsxs)("table",{className:"table-auto px-auto mx-auto my-4 border-collapse w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"border-slate-900 bg-neutral-300 font-medium p-4 pl-8 py-3 text-slate-800 text-left",children:"Numeric AQI"}),(0,l.jsx)("th",{className:"border-slate-900 bg-neutral-300 font-medium p-4 pl-8 py-3 text-slate-800 text-left",children:"City name"}),(0,l.jsx)("th",{className:"border-slate-900 bg-neutral-300 font-medium p-4 pl-8 py-3 text-slate-800 text-left",children:"Station location (Latitude, Longitude)"})]})}),(0,l.jsx)("tbody",{className:"bg-white rounded-xl ring-1 ring-slate-900/5 shadow-xl",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"border-b border-slate-100 p-4 pl-8 text-slate-500",children:e.aqi}),(0,l.jsx)("td",{className:"border-b border-slate-100 p-4 pl-8 text-slate-500",children:e.city.name}),(0,l.jsxs)("td",{className:"border-b border-slate-100 p-4 pl-8 text-slate-500",children:[e.city.geo[0],", ",e.city.geo[1]]})]})})]})]})]})}}},622:function(e,t,a){"use strict";var l=a(2265),r=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),n=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,a){var l,i={},c=null,d=null;for(l in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,l)&&!o.hasOwnProperty(l)&&(i[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===i[l]&&(i[l]=t[l]);return{$$typeof:r,type:e,key:c,ref:d,props:i,_owner:n.current}}t.jsx=i,t.jsxs=i},7437:function(e,t,a){"use strict";e.exports=a(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=2924)}),_N_E=e.O()}]);